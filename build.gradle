// Top-level build file where you can add configuration options common to all sub-projects/modules.

buildscript {
    ext.kotlin_version = "1.3.72"
    ext.lib_version = "6.2.0"
    ext.lib_group = "co.reachfive.identity"
    ext.min_sdk_version = 19
    ext.target_sdk_version = 29
    ext.compile_sdk_version = 29
    ext.version_code = 4
    repositories {
        google()
        jcenter()
    }
    dependencies {
        classpath "com.google.gms:google-services:4.3.5"
        classpath 'com.android.tools.build:gradle:4.1.3'
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"
        classpath "com.github.dcendents:android-maven-gradle-plugin:2.1"
    }
}

subprojects {
    apply plugin: "com.android.library"
    apply plugin: "kotlin-android"
    apply plugin: "kotlin-android-extensions"
    apply plugin: "com.github.dcendents.android-maven"

    repositories {
        google()
        jcenter()
        mavenCentral()
        maven {
            url "https://dl.bintray.com/reachfive/identity-sdk"
        }
    }

    android {
        compileSdkVersion compile_sdk_version

        defaultConfig {
            minSdkVersion min_sdk_version
            targetSdkVersion target_sdk_version
            versionCode version_code
            versionName this.version
            testInstrumentationRunner "android.support.test.runner.AndroidJUnitRunner"
        }

        buildTypes {
            release {
                minifyEnabled false
                proguardFiles getDefaultProguardFile("proguard-android-optimize.txt"), "proguard-rules.pro"
            }
        }

        // TODO remove
        lintOptions {
            abortOnError false
        }

        dependencies {
            implementation "androidx.appcompat:appcompat:1.1.0"
            implementation "com.squareup.retrofit2:retrofit:2.6.0"

            implementation "com.android.support:customtabs:28.0.0"
            implementation "com.github.kittinunf.result:result:2.2.0"
            implementation "com.google.android.gms:play-services-fido:18.1.0"
            implementation "com.squareup.okhttp3:logging-interceptor:4.0.0"
            implementation "com.squareup.retrofit2:converter-gson:2.6.0"

            implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version"
        }
    }
}

//task clean(type: Delete) {
//    delete rootProject.buildDir
//}

group = lib_group
version = lib_version

//pom.project {
//    name 'ReachFive'
//    description 'SDK'
//    url 'https://github.com/ReachFive/identity-android-sdk'
//
//    inceptionYear '2019'
//
//    packaging 'aar'
//    groupId this.group
//    artifactId moduleArtifactId
//    version this.version
//
//    licenses {
//        license {
//            name 'The MIT License (MIT)'
//            url 'https://opensource.org/licenses/MIT'
//        }
//    }
//    scm {
//        connection 'https://github.com/ReachFive/identity-android-sdk.git'
//        url 'https://github.com/ReachFive/identity-android-sdk'
//
//    }
//    developers {
//        developer {
//            id = 'reachfive'
//            name 'Reachfive'
//        }
//    }
//}
